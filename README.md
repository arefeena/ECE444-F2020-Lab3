# ECE444-F2020-Lab3 (and 4/5): Amar Arefeen

This repo is a clone of https://github.com/miguelgrinberg/flasky

---

## Labs 4 and 5

Below are the new deliverables for Labs 4 and 5.  
[The original deliverables for Lab 3 can be found at the end of this doc](#lab-3).

### Deliverable 1

> *Perform all development in a branch "lab4_Microservice_Experiment" in your Lab3 task
GitHub repository (you are experimenting after all).*

If you're seeing this `README`, you're on the right branch âœ…

### Deliverable 2

The instructions in this section assume you're in the repo's root directory (**not** the `app` subdirectory).

```sh
cd /path/to/ECE444-F2020-Lab3
```

They also assume you have Docker installed and some familiarity with using Docker through the command line. For a quick refresher on that, check out [the Getting Started docs](https://docs.docker.com/get-started/) and [this explanation on the fundamentals of Docker](https://stackify.com/docker-image-vs-container-everything-you-need-to-know/).

#### Run with `Dockerfile`

The `app/Dockerfile` (based on [the Docker Hub example](https://hub.docker.com/_/python)) allows us to build and run the program as follows:

1. Build the image

```sh
# Build the image (we're calling it 'hellopy' but feel free to change that)
docker build app -t hellopy

# Make sure the image is present in your local Docker repository
docker image ls
```
![Image built and tagged as 'hellopy:latest'](/images/lab-4-activity-2-success-1.png)

2. Create a container from the image

```sh
# Run the container (we're naming it 'app') but feel free to change that
docker run -it --rm -p 5000:5000 --name app hellopy

# ctrl-c to kill
```
![Container 'app' based on hellopy image](/images/lab-4-activity-2-success-2.png)

3. Check that your app works

Open up a browser and navigate to [localhost:5000](http://localhost:5000/). You should see something like this:

![Familiar index.html page from Lab 3](/images/lab-4-activity-2-success-3.png)

#### (Extra): Run with `docker-compose`

The build/run/teardown process is greatly simplified if you use `docker-compose`:

```sh
# Build and run in background (omit -d for foreground)
docker-compose up --build -d

# Flask app should now be accessible at localhost:5000

# Teardown
docker-compose down
```

This is made possible by the `docker-compose.yml` file in the root directory of the project. The `docker-compose` utility should come installed in the standard distribution of Docker Desktop for Windows/Mac, but [the Docker documentation](https://docs.docker.com/compose/install/) can help you out if your system doesn't fall into that group.

### Deliverable 3

Docker containers initially seem very similar to virtual machines, but there are some key differences between the two:

| Topic | Containers | VMs |
| --- | --- | --- |
| Performance  | Lightweight, low overhead, high-performance | Heavyweight, large overhead, performance cost due to added layer of guest OS |
| Isolation / Security | Process-level; all containers share the host OS's kernel | OS-level; each VM runs a "guest" OS on top of the host |
| Portability | Somewhat limited; kernel of container's OS must match host's e.g. Windows containers can't run on Linux machines | High; so long as the underlying infrastructure supports the CPU instructions you should be good, since the VM comes with its own OS |

The reason for these differences is due to differences in architecture between the two, as shown in this image from a [Docker.com blog post](https://www.docker.com/blog/containers-replacing-virtual-machines/):

![Containers vs Virtual Machines](https://i1.wp.com/www.docker.com/blog/wp-content/uploads/Blog.-Are-containers-..VM-Image-1.png)

---

## Lab 3

Below are the original deliverables for Lab 3:

### Activity 1

The screenshot below shows a successful run of the Chapter 3 examples from the textbook. It's been modified to show my name on the index page instead of `World` and uses `LLLL` verbosity for the timestamp instead of `LLL`, as directed by the assignment instructions.

![Successful run of Chapter 3 examples](/images/lab-3-activity-1-success.png)

### Activity 2

The series of screenshots below show the email form validation in action. It also uses Jinja control structures to display different messages based on which domain the provided email address belongs to.

Welcome screen for a new user:

![Welcome screen for a new user](/images/lab-3-activity-2-success-1.png)

Successful registration of user 'Amar' with a UofT email:

![Successful registration of user 'Amar' with a UofT email](/images/lab-3-activity-2-success-2.png)

Error message generated by email validator:

![Error message generated by email validator](/images/lab-3-activity-2-success-3.png)

Successful contact information change for 'Amar', now using a non-UofT email address:

![Successful contact information change for 'Amar', now using a non-UofT email address](/images/lab-3-activity-2-success-4.png)

### Activity 3

SQL and NoSQL databases are two different approaches for storing data. Both are very powerful and for small- to medium-sized applications are practically equivalent in terms of performance.

The table below outlines some of the differences between the two:

| Topic | SQL | NoSQL |
| --- | --- | --- |
| Type  | **Relational** | Non-relational, **document-oriented** or **key-value** models |
| Data | Structured **records** stored in **tables** | Unstructured **documents** stored in **collections** |
| Flexibility | Fixed number of columns bound by a rigid **schema**, variable number of rows | Highly flexible, documents are not bound to a rigid schema (e.g. like JSON) and a collection can have a variable number of documents | 
| Relationships | Efficiently support **join** operations between tables through primary and foreign keys, which also decreases data duplication | Often do not support join operations; instead users must either store data **denormalised** (duplicated between collections) or have the client application perform the joining manually |
| Examples | Oracle Database, MySQL, Microsoft SQL Server, PostgreSQL | MongoDB, Redis, Elasticsearch, Apache Cassandra |
